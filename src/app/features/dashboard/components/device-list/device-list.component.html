<div class="container">
  <!-- Sol Panel: Cihaz Listesi -->
  <div class="panel device-list-panel">
    <mat-form-field appearance="outline">
      <mat-label>Cihaz Ara...</mat-label>
      <input
        matInput
        placeholder="Seri no, şube adı veya kodu"
        [formControl]="deviceFilterControl"
      />
      <mat-icon matSuffix>search</mat-icon>
    </mat-form-field>

    @if (filteredDevices().length > 0) {
    <mat-list role="list">
      @for (device of filteredDevices(); track device.serialNo) {
      <mat-list-item
        role="listitem"
        (click)="selectDevice(device)"
        [class.selected]="selectedDevice()?.serialNo === device.serialNo"
        matTooltip="Cihaz detaylarını ve MQTT topic'lerini görmek için tıklayın."
      >
        <div class="device-info">
          <span class="serial-no">{{ device.serialNo }}</span>
          <span class="branch-name">{{ device.branchName }}</span>
        </div>
        <div class="device-status">
          <mat-icon
            [style.color]="device.isConnected ? '#4CAF50' : '#F44336'"
          >
            {{ device.isConnected ? "power" : "power_off" }}
          </mat-icon>
        </div>
      </mat-list-item>
      }
    </mat-list>
    } @else {
    <div class="empty-state">
      <mat-icon>devices_other</mat-icon>
      <p>Filtreyle eşleşen bağlı bir cihaz bulunamadı.</p>
    </div>
    }
  </div>
</div>
