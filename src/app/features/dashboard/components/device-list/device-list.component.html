
<div class="list-container">
  <div class="list-header">
    <h3>Connected Devices</h3>
  </div>

  <!-- Filter Input -->
  <mat-form-field appearance="outline" class="filter-field">
    <mat-label>Filter by Module Serial</mat-label>
    <input matInput [formControl]="filterControl" placeholder="Search...">
    <mat-icon matSuffix>search</mat-icon>
  </mat-form-field>

  <!-- Device List -->
  <mat-nav-list class="device-list">
    @for (device of filteredDevices(); track device.serialNo) {
      <a mat-list-item 
         (click)="selectDevice(device)" 
         [class.active]="selectedDevice()?.serialNo === device.serialNo">
        <mat-icon matListItemIcon>memory</mat-icon>
        <div matListItemTitle>{{ device.displayId }}</div>
        <div matListItemLine>{{ device.serialNo }} - {{ device.ipAddress }}</div>
      </a>
    } @empty {
      <div class="empty-state">
         @if (devices().length === 0) {
            <p>No devices loaded. Please upload a JSON file.</p>
         } @else {
            <p>No devices match your filter.</p>
         }
      </div>
    }
  </mat-nav-list>
</div>

