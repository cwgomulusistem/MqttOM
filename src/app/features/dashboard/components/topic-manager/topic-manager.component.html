<div class="topic-manager-container">
  <h4>Custom Topic Subscriptions</h4>
  <div class="form-container">
    <mat-form-field appearance="outline" class="topic-input">
      <mat-label>New Topic (e.g., #, devices/+/status)</mat-label>
      <input
        matInput
        #topicInput
        [ngModel]="newTopic()"
        (ngModelChange)="newTopic.set($event)"
        (keyup.enter)="addTopic()"
        placeholder="Enter topic and press Enter"
      />
    </mat-form-field>
    <button mat-flat-button color="primary" (click)="addTopic()" [disabled]="!newTopic().trim()">
      <mat-icon>add</mat-icon>
      <span>Add</span>
    </button>
  </div>

  <mat-list>
    @for (topic of customTopics(); track topic) {
      <mat-list-item class="topic-item">
        <span matListItemTitle>{{ topic }}</span>
        <div class="spacer"></div>
        <button mat-icon-button color="warn" (click)="removeTopic(topic)" aria-label="Remove topic">
          <mat-icon>delete</mat-icon>
        </button>
      </mat-list-item>
    } @empty {
      <p class="empty-message">No custom topics added. Defaulting to '#'.</p>
    }
  </mat-list>
</div>
